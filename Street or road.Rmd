  
---
title: "STAT 184" 
subtitle: "Street or Road"
author: "eric weah"
output: html_notebook
---





```{r}
# clean up workspace environment
rm(list = ls())
# all packages used for the assignment
library(mosaic)
library(tidyverse)
library(DataComputing)
library(tidyverse)
library(tidyr)
library(lubridate)
```

```{r}
download.file(url="http://tiny.cc/dcf/CMS_ProvidersSimple.rds",
              destfile = "YourNameForTheFile.rds")
DataTable <- readRDS("YourNameForTheFile.rds")
```

```{r}
Addresses <- read_csv("http://tiny.cc/dcf/street-addresses.csv")
Sample <- 
  Addresses %>%
  sample_n(size = 50)

```

```{r}
Matches <- 
  Sample %>%
  filter(grepl(pattern = "PO", address))

```

```{r}
Dont <- 
  Sample %>%
  filter( ! grepl(pattern = "PO", address))
```

```{r}
pattern <- "BOX\\s+(\\d+)"

Matches <- 
  Sample %>% 
  filter(grepl(pattern, address))

Dont <-
  Sample %>%
  filter( ! grepl(pattern, address))
Dont

BoxNumbers <- 
  Sample %>%
  filter(grepl(pattern, address)) %>%
  tidyr::extract(address, into = "boxnum", regex = pattern)

```

```{r}
Addresses <- read_csv("http://tiny.cc/dcf/street-addresses.csv")
Sample <- 
  Addresses %>%
  sample_n(size = 50)

```
Your turn: Read the following R statements. Next to each line, give a short explanation of what the line contributes to the task. For each of the regexes, explain in simple everyday language what pattern is being matched.
```{r}
pattern <- "(ST|RD|ROAD)" # looking for a pattern street or road names
LeftOvers <-## variable name for table data
  Addresses %>% # pulls data from data table
  filter( ! grepl(pattern, address),# filters out what we dont want to see from pattern
          ! grepl("\\sAPT|UNIT\\s[\\d]+$", address), # looking for anything with apartments or unit 
          ! grepl(" BOX ", address)
          )

print(LeftOvers)
```

```{r}
Matches<-
  Addresses%>%
  filter(!grepl(pattern = "PO", address),!grepl("POINT", address), !grepl("COURT", address),!grepl("PKWY",address),!grepl("PLACE",address),!grepl("PATH", address),!grepl("ROAD", address),!grepl("LN",address), !grepl("CIRCLE", address),! grepl("CT", address), !grepl("LANDING",address),!grepl("HEIGHTS", address))
Matches

```
```{r}
DescOrder<- Matches%>%
  group_by(address)%>%
  summarise(total=n())%>%
  arrange(desc(total))
DescOrder
```
```{r}
PopularityOfAdd<-
  DescOrder%>%
  filter(rank(desc(total))<=10)
PopularityOfAdd
```
```{r}
ggplot(data = PopularityOfAdd, aes(x=reorder(Addresses,-total),y=total))+
  geom_bar(stat = 'identity',position = 'stack', width =.9)
```
```
